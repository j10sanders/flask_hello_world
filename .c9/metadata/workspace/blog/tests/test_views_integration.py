{"filter":false,"title":"test_views_integration.py","tooltip":"/blog/tests/test_views_integration.py","undoManager":{"mark":43,"position":43,"stack":[[{"start":{"row":0,"column":0},"end":{"row":33,"column":19},"action":"insert","lines":["import os","import unittest","from urlparse import urlparse","","from werkzeug.security import generate_password_hash","","# Configure your app to use the testing database","os.environ[\"CONFIG_PATH\"] = \"blog.config.TestingConfig\"","","from blog import app","from blog.database import Base, engine, session, User, Entry","","class TestViews(unittest.TestCase):","    def setUp(self):","        \"\"\" Test setup \"\"\"","        self.client = app.test_client()","","        # Set up the tables in the database","        Base.metadata.create_all(engine)","","        # Create an example user","        self.user = User(name=\"Alice\", email=\"alice@example.com\",","                         password=generate_password_hash(\"test\"))","        session.add(self.user)","        session.commit()","","    def tearDown(self):","        \"\"\" Test teardown \"\"\"","        session.close()","        # Remove the tables and their data from the database","        Base.metadata.drop_all(engine)","","if __name__ == \"__main__\":","    unittest.main()"],"id":1}],[{"start":{"row":30,"column":38},"end":{"row":31,"column":0},"action":"insert","lines":["",""],"id":2},{"start":{"row":31,"column":0},"end":{"row":31,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":31,"column":4},"end":{"row":31,"column":8},"action":"remove","lines":["    "],"id":3}],[{"start":{"row":31,"column":4},"end":{"row":32,"column":0},"action":"insert","lines":["",""],"id":4},{"start":{"row":32,"column":0},"end":{"row":32,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":32,"column":4},"end":{"row":53,"column":49},"action":"insert","lines":["    def simulate_login(self):","        with self.client.session_transaction() as http_session:","            http_session[\"user_id\"] = str(self.user.id)","            http_session[\"_fresh\"] = True","","    def test_add_entry(self):","        self.simulate_login()","","        response = self.client.post(\"/entry/add\", data={","            \"title\": \"Test Entry\",","            \"content\": \"Test content\"","        })","","        self.assertEqual(response.status_code, 302)","        self.assertEqual(urlparse(response.location).path, \"/\")","        entries = session.query(Entry).all()","        self.assertEqual(len(entries), 1)","","        entry = entries[0]","        self.assertEqual(entry.title, \"Test Entry\")","        self.assertEqual(entry.content, \"Test content\")","        self.assertEqual(entry.author, self.user)"],"id":5}],[{"start":{"row":32,"column":4},"end":{"row":32,"column":8},"action":"remove","lines":["    "],"id":6}],[{"start":{"row":2,"column":5},"end":{"row":2,"column":13},"action":"remove","lines":["urlparse"],"id":7},{"start":{"row":2,"column":5},"end":{"row":2,"column":17},"action":"insert","lines":["urllib.parse"]}],[{"start":{"row":2,"column":25},"end":{"row":2,"column":33},"action":"remove","lines":["urlparse"],"id":8},{"start":{"row":2,"column":25},"end":{"row":2,"column":37},"action":"insert","lines":["urllib.parse"]}],[{"start":{"row":46,"column":25},"end":{"row":46,"column":33},"action":"remove","lines":["urlparse"],"id":9},{"start":{"row":46,"column":25},"end":{"row":46,"column":37},"action":"insert","lines":["urllib.parse"]}],[{"start":{"row":46,"column":25},"end":{"row":46,"column":32},"action":"remove","lines":["urllib."],"id":10}],[{"start":{"row":2,"column":11},"end":{"row":2,"column":17},"action":"remove","lines":[".parse"],"id":11}],[{"start":{"row":2,"column":19},"end":{"row":2,"column":26},"action":"remove","lines":["urllib."],"id":12}],[{"start":{"row":2,"column":0},"end":{"row":2,"column":24},"action":"remove","lines":["from urllib import parse"],"id":13},{"start":{"row":2,"column":0},"end":{"row":2,"column":33},"action":"insert","lines":["from urllib.parse import urlparse"]}],[{"start":{"row":46,"column":25},"end":{"row":46,"column":30},"action":"remove","lines":["parse"],"id":14},{"start":{"row":46,"column":25},"end":{"row":46,"column":33},"action":"insert","lines":["urlparse"]}],[{"start":{"row":2,"column":33},"end":{"row":3,"column":0},"action":"insert","lines":["",""],"id":15}],[{"start":{"row":4,"column":0},"end":{"row":5,"column":0},"action":"remove","lines":["",""],"id":16}],[{"start":{"row":3,"column":0},"end":{"row":4,"column":0},"action":"remove","lines":["",""],"id":17}],[{"start":{"row":21,"column":58},"end":{"row":21,"column":62},"action":"remove","lines":["test"],"id":18},{"start":{"row":21,"column":58},"end":{"row":21,"column":59},"action":"insert","lines":["J"]}],[{"start":{"row":21,"column":59},"end":{"row":21,"column":60},"action":"insert","lines":["o"],"id":19}],[{"start":{"row":21,"column":60},"end":{"row":21,"column":61},"action":"insert","lines":["n"],"id":20}],[{"start":{"row":21,"column":61},"end":{"row":21,"column":62},"action":"insert","lines":["a"],"id":21}],[{"start":{"row":21,"column":62},"end":{"row":21,"column":63},"action":"insert","lines":["t"],"id":22}],[{"start":{"row":21,"column":63},"end":{"row":21,"column":64},"action":"insert","lines":["h"],"id":23}],[{"start":{"row":21,"column":64},"end":{"row":21,"column":65},"action":"insert","lines":["a"],"id":24}],[{"start":{"row":21,"column":65},"end":{"row":21,"column":66},"action":"insert","lines":["n"],"id":25}],[{"start":{"row":21,"column":66},"end":{"row":21,"column":67},"action":"insert","lines":["1"],"id":26}],[{"start":{"row":21,"column":67},"end":{"row":21,"column":68},"action":"insert","lines":["2"],"id":27}],[{"start":{"row":21,"column":68},"end":{"row":21,"column":69},"action":"insert","lines":["3"],"id":28}],[{"start":{"row":20,"column":31},"end":{"row":20,"column":36},"action":"remove","lines":["Alice"],"id":29},{"start":{"row":20,"column":31},"end":{"row":20,"column":32},"action":"insert","lines":["J"]}],[{"start":{"row":20,"column":32},"end":{"row":20,"column":33},"action":"insert","lines":["o"],"id":30}],[{"start":{"row":20,"column":33},"end":{"row":20,"column":34},"action":"insert","lines":["n"],"id":31}],[{"start":{"row":20,"column":44},"end":{"row":20,"column":49},"action":"remove","lines":["alice"],"id":32},{"start":{"row":20,"column":44},"end":{"row":20,"column":45},"action":"insert","lines":["j"]}],[{"start":{"row":20,"column":45},"end":{"row":20,"column":46},"action":"insert","lines":["o"],"id":33}],[{"start":{"row":20,"column":46},"end":{"row":20,"column":47},"action":"insert","lines":["n"],"id":34}],[{"start":{"row":20,"column":44},"end":{"row":20,"column":47},"action":"remove","lines":["jon"],"id":35},{"start":{"row":20,"column":44},"end":{"row":20,"column":45},"action":"insert","lines":["a"]}],[{"start":{"row":20,"column":45},"end":{"row":20,"column":46},"action":"insert","lines":["l"],"id":36}],[{"start":{"row":20,"column":46},"end":{"row":20,"column":47},"action":"insert","lines":["i"],"id":37}],[{"start":{"row":20,"column":47},"end":{"row":20,"column":48},"action":"insert","lines":["c"],"id":38}],[{"start":{"row":20,"column":48},"end":{"row":20,"column":49},"action":"insert","lines":["e"],"id":39}],[{"start":{"row":20,"column":31},"end":{"row":20,"column":34},"action":"remove","lines":["Jon"],"id":40},{"start":{"row":20,"column":31},"end":{"row":20,"column":32},"action":"insert","lines":["A"]}],[{"start":{"row":20,"column":32},"end":{"row":20,"column":33},"action":"insert","lines":["l"],"id":41}],[{"start":{"row":20,"column":33},"end":{"row":20,"column":34},"action":"insert","lines":["i"],"id":42}],[{"start":{"row":20,"column":34},"end":{"row":20,"column":35},"action":"insert","lines":["c"],"id":43}],[{"start":{"row":20,"column":35},"end":{"row":20,"column":36},"action":"insert","lines":["e"],"id":44}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":17,"column":40},"end":{"row":17,"column":40},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1449431319000,"hash":"ba41926cf4bc40a16acd55d19c6bbcebead650b0"}