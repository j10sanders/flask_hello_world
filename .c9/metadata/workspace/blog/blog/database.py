{"filter":false,"title":"database.py","tooltip":"/blog/blog/database.py","ace":{"folds":[],"scrolltop":215,"scrollleft":0,"selection":{"start":{"row":36,"column":6},"end":{"row":36,"column":6},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":4,"state":"start","mode":"ace/mode/python"}},"hash":"a25a5841cb39e76077fcfc60aad52cba0b6788fe","undoManager":{"mark":22,"position":22,"stack":[[{"start":{"row":0,"column":0},"end":{"row":9,"column":19},"action":"insert","lines":["from sqlalchemy import create_engine","from sqlalchemy.orm import sessionmaker","from sqlalchemy.ext.declarative import declarative_base","","from blog import app","","engine = create_engine(app.config[\"SQLALCHEMY_DATABASE_URI\"])","Base = declarative_base()","Session = sessionmaker(bind=engine)","session = Session()"],"id":1}],[{"start":{"row":6,"column":24},"end":{"row":6,"column":25},"action":"insert","lines":[" "],"id":2}],[{"start":{"row":9,"column":19},"end":{"row":10,"column":0},"action":"insert","lines":["",""],"id":3}],[{"start":{"row":10,"column":0},"end":{"row":11,"column":0},"action":"insert","lines":["",""],"id":4}],[{"start":{"row":11,"column":0},"end":{"row":12,"column":0},"action":"insert","lines":["",""],"id":5}],[{"start":{"row":11,"column":0},"end":{"row":12,"column":0},"action":"remove","lines":["",""],"id":6}],[{"start":{"row":11,"column":0},"end":{"row":25,"column":32},"action":"insert","lines":["import datetime","","from sqlalchemy import Column, Integer, String, Text, DateTime","","from .database import Base, engine","","class Entry(Base):","    __tablename__ = \"entries\"","","    id = Column(Integer, primary_key=True)","    title = Column(String(1024))","    content = Column(Text)","    datetime = Column(DateTime, default=datetime.datetime.now)","","Base.metadata.create_all(engine)"],"id":7}],[{"start":{"row":6,"column":24},"end":{"row":6,"column":25},"action":"remove","lines":[" "],"id":8}],[{"start":{"row":23,"column":62},"end":{"row":24,"column":0},"action":"insert","lines":["",""],"id":9},{"start":{"row":24,"column":0},"end":{"row":24,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":24,"column":4},"end":{"row":25,"column":0},"action":"insert","lines":["",""],"id":10},{"start":{"row":25,"column":0},"end":{"row":25,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":25,"column":4},"end":{"row":26,"column":0},"action":"insert","lines":["",""],"id":11},{"start":{"row":26,"column":0},"end":{"row":26,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":26,"column":4},"end":{"row":27,"column":0},"action":"insert","lines":["",""],"id":12},{"start":{"row":27,"column":0},"end":{"row":27,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":27,"column":0},"end":{"row":27,"column":4},"action":"remove","lines":["    "],"id":13}],[{"start":{"row":25,"column":0},"end":{"row":31,"column":34},"action":"insert","lines":["class User(Base, UserMixin):","    __tablename__ = \"users\"","","    id = Column(Integer, primary_key=True)","    name = Column(String(128))","    email = Column(String(128), unique=True)","    password = Column(String(128))"],"id":14}],[{"start":{"row":24,"column":4},"end":{"row":25,"column":0},"action":"insert","lines":["",""],"id":15},{"start":{"row":25,"column":0},"end":{"row":25,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":16,"column":0},"end":{"row":17,"column":0},"action":"insert","lines":["",""],"id":16}],[{"start":{"row":17,"column":0},"end":{"row":17,"column":37},"action":"insert","lines":["from flask.ext.login import UserMixin"],"id":17}],[{"start":{"row":17,"column":37},"end":{"row":18,"column":0},"action":"insert","lines":["",""],"id":18}],[{"start":{"row":4,"column":0},"end":{"row":5,"column":0},"action":"remove","lines":["from blog import app",""],"id":19},{"start":{"row":4,"column":0},"end":{"row":4,"column":20},"action":"insert","lines":["from blog import app"]}],[{"start":{"row":4,"column":20},"end":{"row":5,"column":0},"action":"insert","lines":["",""],"id":20}],[{"start":{"row":13,"column":62},"end":{"row":14,"column":0},"action":"remove","lines":["",""],"id":21}],[{"start":{"row":14,"column":34},"end":{"row":15,"column":0},"action":"remove","lines":["",""],"id":22}],[{"start":{"row":17,"column":0},"end":{"row":32,"column":38},"action":"remove","lines":["class Entry(Base):","    __tablename__ = \"entries\"","","    id = Column(Integer, primary_key=True)","    title = Column(String(1024))","    content = Column(Text)","    datetime = Column(DateTime, default=datetime.datetime.now)","    ","    ","class User(Base, UserMixin):","    __tablename__ = \"users\"","","    id = Column(Integer, primary_key=True)","    name = Column(String(128))","    email = Column(String(128), unique=True)","    password = Column(String(128))    "],"id":46},{"start":{"row":17,"column":0},"end":{"row":36,"column":55},"action":"insert","lines":["from sqlalchemy import ForeignKey","from sqlalchemy.orm import relationship","","class User(Base, UserMixin):","    __tablename__ = \"users\"","","    id = Column(Integer, primary_key=True)","    name = Column(String(128))","    email = Column(String(128), unique=True)","    password = Column(String(128))","    entries = relationship(\"Entry\", backref=\"author\")","","class Entry(Base):","    __tablename__ = \"entries\"","","    id = Column(Integer, primary_key=True)","    title = Column(String(1024))","    content = Column(Text)","    datetime = Column(DateTime, default=datetime.datetime.now)","    author_id = Column(Integer, ForeignKey('users.id'))"]}]]},"timestamp":1449016851000}